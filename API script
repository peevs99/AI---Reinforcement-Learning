import requests


class API:
    BASE_URL = 'https://www.notexponential.com/aip2pgaming/api'
    HEADERS = {
        'x-api-key': '3190885c968cccce7eb8',
        'userId': '1137',
        'Content-Type': 'application/x-www-form-urlencoded',
        'User-Agent': 'PostmanRuntime/7.32.3',
        'Accept': '*/*',
        'Accept-Encoding': 'gzip, deflate, br',
        'Connection': 'keep-alive'
    }

    @classmethod
    def get_runs(cls, team_id, count):
        url = f"{cls.BASE_URL}/rl/gw.php?type=runs&teamId={team_id}&count={count}"
        response = requests.get(url, headers=cls.HEADERS)
        return response.text

    @classmethod
    def get_location(cls, team_id):
        url = f"{cls.BASE_URL}/rl/gw.php?type=location&teamId={team_id}"
        response = requests.get(url, headers=cls.HEADERS)
        return response.text

    @classmethod
    def enter_world(cls, world_id, team_id):
        url = f"{cls.BASE_URL}/rl/gw.php"
        payload = {
            'type': 'enter',
            'worldId': world_id,
            'teamId': team_id
        }
        response = requests.post(url, headers=cls.HEADERS, data=payload)
        return response.text

    @classmethod
    def make_move(cls, team_id, move, world_id):
        url = f"{cls.BASE_URL}/rl/gw.php"
        payload = {
            'type': 'move',
            'teamId': team_id,
            'move': move,
            'worldId': world_id
        }
        response = requests.post(url, headers=cls.HEADERS, data=payload)
        return response.text

    @classmethod
    def get_score(cls, team_id):
        url = f"{cls.BASE_URL}/rl/score.php?type=score&teamId={team_id}"
        response = requests.get(url, headers=cls.HEADERS)
        return response.text
